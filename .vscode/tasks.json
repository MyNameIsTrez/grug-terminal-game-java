{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Recompile",
            "dependsOn": [
                "Compile libgrug.so",
                "Create classes/ directory",
                "Compile game_Game.h",
                "Compile libglobal_library_loader.so",
                "Regenerate adapter.c",
                "Compile libadapter.so"
            ],
            "dependsOrder": "sequence",
            "group": "build"
        },
        {
            "label": "Compile libgrug.so",
            "type": "shell",
            "command": "gcc",
            "args": [
                "grug/grug.c",
                "-o",
                "grug/libgrug.so",
                "-shared",
                "-fPIC",
                "-Wall",
                "-Wextra",
                "-Werror",
                "-Wpedantic",
                "-Wshadow",
                "-Wfatal-errors",
                "-g",
                "-rdynamic"
            ],
            "hide": true
        },
        {
            "label": "Create classes/ directory",
            "type": "shell",
            "command": "mkdir",
            "args": [
                "-p",
                "classes"
            ],
            "hide": true
        },
        {
            "label": "Compile game_Game.h",
            "type": "shell",
            "command": "javac",
            "args": [
                "-d",
                "classes",
                "-h",
                "headers",
                "game/Game.java"
            ],
            "hide": true
        },
        {
            "label": "Compile libglobal_library_loader.so",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "gcc global_library_loader.c -o libglobal_library_loader.so -shared -fPIC -Wall -Wextra -Werror -Wpedantic -Wshadow -Wfatal-errors -g -I$(dirname \"$(dirname \"$(readlink -f \"$(which javac)\")\")\")/include -I$(dirname \"$(dirname \"$(readlink -f \"$(which javac)\")\")\")/include/linux"
            ],
            "hide": true
        },
        {
            "label": "Regenerate adapter.c",
            "command": "python3",
            "args": [
                "grug-adapter-for-java/generate.py",
                "mod_api.json",
                "adapter.c",
                "game",
                "Game"
            ],
            "problemMatcher": [],
            "hide": true
        },
        {
            "label": "Compile libadapter.so",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "gcc adapter.c -o libadapter.so -shared -fPIC -Wall -Wextra -Werror -Wpedantic -Wshadow -Wfatal-errors -g -I$(dirname \"$(dirname \"$(readlink -f \"$(which javac)\")\")\")/include -I$(dirname \"$(dirname \"$(readlink -f \"$(which javac)\")\")\")/include/linux"
            ],
            "hide": true
        }
    ]
}
